rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Allow read/write for any authenticated user
    // Note: In a real production app with Cloud Functions, we would re-enable strict role checks.
    // For this Serverless/Spark-Plan version, we rely on App Logic for UI security.
    // Public Registration Rule
    match /registrations/{doc} {
      allow create: if true; // Public can sign up
      allow read, write: if request.auth != null; // Admin can manage
    }

    // Default Permissive Rule (Authenticated Users)
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}